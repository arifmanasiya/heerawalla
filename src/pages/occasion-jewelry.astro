---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import ProductCard from '../components/ProductCard.astro';
import { loadProductsWithMedia } from '../lib/products';
import { withBase } from '../lib/paths';

const editionLabel = 'Occasion Jewelry';
const editionKey = 'occasion';
const products = (await loadProductsWithMedia()).filter((product) =>
  (product.category || '').startsWith(`${editionKey}/`)
);
const seo = {
  primary: 'occasion jewelry',
  secondary: [
    'evening fine jewelry',
    'statement diamond jewelry',
    'formal gold jewelry',
    'special occasion jewelry'
  ]
};
const metaTitle = `Heerawalla ${editionLabel} \u2014 Editions`;
const metaDescription =
  'Heerawalla occasion jewelry is composed for elevated evenings, with luminous detail and poised silhouettes.';
const keywords = [seo.primary, ...seo.secondary].join(', ');
const breadcrumbs = [
  { label: 'Home', href: withBase('/') },
  { label: editionLabel }
];
---

<BaseLayout title={metaTitle} description={metaDescription} keywords={keywords} breadcrumbs={breadcrumbs}>
  <Header />

  <main class="max-w-7xl mx-auto px-6 py-12 space-y-12">
    <section class="space-y-4">
      <p class="text-xs uppercase tracking-[0.18em] text-slate-500">Edition</p>
      <h1 class="text-4xl font-semibold tracking-tight">{editionLabel}</h1>
      <p class="text-sm text-slate-600 max-w-2xl">
        Luminous compositions designed for ceremony, celebration, and enduring presence.
      </p>
      <div class="flex flex-wrap gap-3 text-xs uppercase tracking-[0.2em] text-slate-500">
        <span class="text-slate-400">Design Codes</span>
        <a href={withBase('/axis')} class="hover:text-ink">Axis</a>
        <a href={withBase('/continuum')} class="hover:text-ink">Continuum</a>
        <a href={withBase('/eclipse')} class="hover:text-ink">Eclipse</a>
      </div>
    </section>

    <section class="border-t border-slate-200 pt-8">
      {products.length ? (
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {products.map((product) => (
            <ProductCard product={product} />
          ))}
        </div>
      ) : (
        <p class="text-sm text-slate-500">
          Occasion selections are curated seasonally. The concierge can share availability.
        </p>
      )}
    </section>
  </main>

  <Footer />
</BaseLayout>
